"use strict";var _typeof=typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj};var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor}}();function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}(function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId]){return installedModules[moduleId].exports}var module=installedModules[moduleId]={i:moduleId,l:false,exports:{}};modules[moduleId].call(module.exports,module,module.exports,__webpack_require__);module.l=true;return module.exports}__webpack_require__.m=modules;__webpack_require__.c=installedModules;__webpack_require__.d=function(exports,name,getter){if(!__webpack_require__.o(exports,name)){Object.defineProperty(exports,name,{configurable:false,enumerable:true,get:getter})}};__webpack_require__.n=function(module){var getter=module&&module.__esModule?function getDefault(){return module["default"]}:function getModuleExports(){return module};__webpack_require__.d(getter,"a",getter);return getter};__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)};__webpack_require__.p="";return __webpack_require__(__webpack_require__.s=4)})([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",function(){return STRATEGY_OPTIONS});__webpack_exports__["c"]=isNetworkEvent;__webpack_exports__["b"]=createChildDiv;var STRATEGY_OPTIONS={locale:"en",height:"100%",width:"100%",autoResize:true,edges:{arrows:{to:true}},layout:{hierarchical:{direction:"UD"}},interaction:{hover:true},manipulation:{enabled:false}};var NETWORK_EVENTS=["click","doubleClick","dragStart","dragging","dragEnd","zoom","showPopup","hidePopup","select","selectNode","selectEdge","deselectNode","deselectEdge","hoverNode","hoverEdge","blurNode","blurEdge"];Object.freeze(NETWORK_EVENTS);function isNetworkEvent(event){if(typeof event!=="string")return false;else return NETWORK_EVENTS.includes(event)}function createChildDiv(parent,childId){if(!(parent instanceof HTMLElement)||typeof childId!=="string"){return undefined}else{var child=document.createElement("div");child.setAttribute("id",childId);parent.appendChild(child);return child}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var Attribute=function(){function Attribute(jsonDesc,attribute,value){_classCallCheck(this,Attribute);if((typeof jsonDesc==="undefined"?"undefined":_typeof(jsonDesc))!=="object"){throw new Error("@Attribute.constructor() : L'argument jsonDesc doit être un objet JSON")}if(typeof attribute!=="string"){throw new Error("@Attribute.constructor() : L'argument attribute doit être une chaîne de caractère")}if(typeof value!=="string"){throw new Error("@Attribute.constructor() : L'argument value doit être une chaîne de caractère")}this.attributeKey=attribute;this.value=value;this.short=jsonDesc["court"];this.long=jsonDesc["long"]}_createClass(Attribute,[{key:"getValue",value:function getValue(){return this.value}},{key:"getShortText",value:function getShortText(){return this.short}},{key:"getLongText",value:function getLongText(){return this.long}},{key:"getAttributeKey",value:function getAttributeKey(){return this.attributeKey}},{key:"prettyPrint",value:function prettyPrint(){console.log("Attribut "+this.getAttributeKey()+" -> "+this.getValue()+" :");console.log('\ttexte long  : "'+this.getLongText()+'"\n\ttexte court : "'+this.getShortText()+'"')}}]);return Attribute}();__webpack_exports__["a"]=Attribute},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__AttributesCollection__=__webpack_require__(5);var __WEBPACK_IMPORTED_MODULE_1__Common__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_2__Attribute__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_3__AttributeButton__=__webpack_require__(7);var AttributesPanel=function(){function AttributesPanel(element){var _this=this;_classCallCheck(this,AttributesPanel);this.attributesCollection=__WEBPACK_IMPORTED_MODULE_0__AttributesCollection__["a"];if(!(element instanceof HTMLElement)){throw new Error("@AttributesPanel() -> Erreur : element doit être une instance de HTMLElement")}this.element=element;this.buttons=[];var map=this.attributesCollection.getAttributesValuesKeysMap();map.forEach(function(attribute){_this.buttons[attribute]=[];map[attribute].forEach(function(value){_this.buttons[attribute][value]=undefined;try{_this.addButton(_this.attributesCollection.getAttributeInstance(attribute,value))}catch(e){console.error("@AttributesPanel.constructor() : erreur lors de l'ajout du boutons ("+attribute+","+value+") : ");console.error(e)}})})}_createClass(AttributesPanel,[{key:"addButton",value:function addButton(attribute){if(!(attribute instanceof __WEBPACK_IMPORTED_MODULE_2__Attribute__["a"])){throw new Error("@AttributesPanel.addButton() : L'attribut attribute doit être une instance de Attribute")}if(!(this.buttons[attribute.getAttributeKey()][attribute.getValue()]instanceof __WEBPACK_IMPORTED_MODULE_3__AttributeButton__["a"])){this.buttons[attribute.getAttributeKey()][attribute.getValue()]=new __WEBPACK_IMPORTED_MODULE_3__AttributeButton__["a"](attribute,this.element)}}},{key:"hideButton",value:function hideButton(attribute){if(!(attribute instanceof __WEBPACK_IMPORTED_MODULE_2__Attribute__["a"])){throw new Error("@AttributesPanel.addButton() : L'attribut attribute doit être une instance de Attribute")}if(this.buttons[attribute.getAttributeKey()][attribute.getValue()]instanceof __WEBPACK_IMPORTED_MODULE_2__Attribute__["a"]){this.buttons[attribute.getAttributeKey()][attribute.getValue()].hide()}}},{key:"showButton",value:function showButton(attribute){if(!(attribute instanceof __WEBPACK_IMPORTED_MODULE_2__Attribute__["a"])){throw new Error("@AttributesPanel.addButton() : L'attribut attribute doit être une instance de Attribute")}if(this.buttons[attribute.getAttributeKey()][attribute.getValue()]instanceof __WEBPACK_IMPORTED_MODULE_2__Attribute__["a"]){this.buttons[attribute.getAttributeKey()][attribute.getValue()].show()}}}]);return AttributesPanel}();__webpack_exports__["a"]=AttributesPanel},function(module,__webpack_exports__,__webpack_require__){"use strict";var Character=function(){function Character(json,id){_classCallCheck(this,Character);this.id=id;this.nom=json.nom;this.img=json.img;this.actived=true;this.attributs=[];for(var i=0;i<json.attributs.length;i++){}}_createClass(Character,[{key:"getImg",value:function getImg(){return this.img}},{key:"getNom",value:function getNom(){return this.nom}},{key:"getAttributs",value:function getAttributs(){return this.attributs}},{key:"active",value:function active(){if(this.actived)return;document.getElementById("charimg"+this.id).style.filter="";document.getElementById("charstatus"+this.id).innerHTML="Suspect";this.actived=true}},{key:"unactive",value:function unactive(reason){if(!this.actived)return;document.getElementById("charimg"+this.id).style.filter="grayscale(100%)";document.getElementById("charstatus"+this.id).innerHTML="Eliminé : "+reason;this.actived=false}},{key:"listeAttribute",value:function listeAttribute(){var res="";for(var i=0;i<this.attributs.length;i++){res+=this.attributs[i].attributeKey+":"+this.attributs[i].attributeValue+"</br>"}}}]);return Character}();__webpack_exports__["a"]=Character},function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:true});var __WEBPACK_IMPORTED_MODULE_0__objects_AttributesPanel__=__webpack_require__(2);var __WEBPACK_IMPORTED_MODULE_1__objects_StrategyPanel__=__webpack_require__(8);var __WEBPACK_IMPORTED_MODULE_2__objects_Common__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_3__objects_Character__=__webpack_require__(3);var __WEBPACK_IMPORTED_MODULE_4__objects_PopulationPanel__=__webpack_require__(9);var nodes=new vis.DataSet([{id:1,label:"Node 1",level:0,title:"Je s'appelle root",enabled:true},{id:2,label:"Node 2",level:1,enabled:true},{id:3,label:"Node 3",level:1,enabled:true},{id:4,label:"Node 4",level:2,enabled:true},{id:5,label:"Node 5",level:2,enabled:true}]);var edges=new vis.DataSet([{from:1,to:2},{from:1,to:3},{from:2,to:4},{from:2,to:5},{from:3}]);new __WEBPACK_IMPORTED_MODULE_1__objects_StrategyPanel__["a"](document.getElementById("strategie-network"),nodes,edges,new __WEBPACK_IMPORTED_MODULE_0__objects_AttributesPanel__["a"](document.getElementById("attributs")));var pop=new __WEBPACK_IMPORTED_MODULE_4__objects_PopulationPanel__["a"];pop.load();pop.loadTable(pop)},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Attribute__=__webpack_require__(1);var __WEBPACK_IMPORTED_MODULE_1__attributs__=__webpack_require__(6);var __WEBPACK_IMPORTED_MODULE_1__attributs___default=__webpack_require__.n(__WEBPACK_IMPORTED_MODULE_1__attributs__);var AttributesCollection=function(){function AttributesCollection(){var _this2=this;_classCallCheck(this,AttributesCollection);this.attributs=__WEBPACK_IMPORTED_MODULE_1__attributs___default.a["attributs"];this.attributesMap=this.getAttributesValuesKeysMap();this.attributesMap.forEach(function(attribute){_this2.attributesMap[attribute].forEach(function(value){_this2.attributesMap[attribute][value]=undefined})});this.prettyPrint()}_createClass(AttributesCollection,[{key:"getAttributesKeys",value:function getAttributesKeys(){return _.allKeys(this.attributs)}},{key:"getValuesKeys",value:function getValuesKeys(attribute){if(this.checkAttributeExists(attribute)){return _.allKeys(this.attributs[attribute])}else{return undefined}}},{key:"getAttributeJSON",value:function getAttributeJSON(attribute,value){if(this.checkValueExists(attribute,value)){return this.attributs[attribute][value]}else{return undefined}}},{key:"getAttributeInstance",value:function getAttributeInstance(attribute,value){var jsonAttribute=this.getAttributeJSON(attribute,value);if(jsonAttribute!==undefined){if(this.attributesMap[attribute][value]===undefined){var attr=new __WEBPACK_IMPORTED_MODULE_0__Attribute__["a"](jsonAttribute,attribute,value);this.attributesMap[attribute][value]=attr;return attr}else{return this.attributesMap[attribute][value]}}return undefined}},{key:"checkAttributeExists",value:function checkAttributeExists(attribute){return typeof attribute==="string"&&this.getAttributesKeys().includes(attribute)}},{key:"checkValueExists",value:function checkValueExists(attribute,value){if(this.checkAttributeExists(attribute)){return this.getValuesKeys(attribute).includes(value)}else{return false}}},{key:"getAttributesValuesKeysMap",value:function getAttributesValuesKeysMap(){var _this3=this;var map=this.getAttributesKeys();if(map!==undefined){map.forEach(function(key){map[key]=_this3.getValuesKeys(key)})}return map}},{key:"prettyPrint",value:function prettyPrint(){var map=this.getAttributesValuesKeysMap();if(map.length<1){console.log("Map des attributs vide")}else{map.forEach(function(attribute){console.log("Valeurs pour l'attribut '"+attribute+"' :");map[attribute].forEach(function(value){console.log("\t"+value)})})}}}]);return AttributesCollection}();var singleton=new AttributesCollection;__webpack_exports__["a"]=singleton},function(module,exports){module.exports={attributs:{cheveux:{chauve:{long:"Le personnage est chauve ?",court:"Chauve ?"},blond:{long:"Le personnage est blond ?",court:"Cheveux blond ?"},brun:{long:"Le personnage est brun ?",court:"Cheveux brun ?"}},yeux:{marron:{long:"Le personnage a les yeux marron ?",court:"Yeux marron ?"},bleu:{long:"Le personnage a les yeux bleu ?",court:"Yeux bleu ?"},vert:{long:"Le personnage a les yeux vert ?",court:"Yeux vert ?"}}}}},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Common__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_1__Attribute__=__webpack_require__(1);var nextButtonId=0;var AttributeButton=function(){function AttributeButton(attribute,parent){var _this4=this;_classCallCheck(this,AttributeButton);if(!(attribute instanceof __WEBPACK_IMPORTED_MODULE_1__Attribute__["a"])){throw new Error("L'argument attribute doit être une instance de Attribute")}if(!(parent instanceof HTMLElement)){this.parent=document.getElementById("attributs");if(!(parent instanceof HTMLElement)){throw new Error("L'argument parent doit être un Element HTML")}}else{this.parent=parent}this.element=__WEBPACK_IMPORTED_MODULE_0__Common__["b"](this.parent,"attributeButton"+nextButtonId);this.element.setAttribute("class","attributeButton");nextButtonId++;this.hidden=false;this.attribute=attribute;this.setText(this.attribute.getLongText());this.element.addEventListener("click",function(event){return _this4.onClick(event)})}_createClass(AttributeButton,[{key:"hide",value:function hide(){if(!this.hidden){this.element.setAttribute("style","display: none;")}}},{key:"show",value:function show(){if(this.hidden){this.element.removeAttribute("style")}}},{key:"onClick",value:function onClick(event){this.attribute.prettyPrint()}},{key:"isHidden",value:function isHidden(){return this.hidden}},{key:"setText",value:function setText(text){var textNode=void 0;if(text===undefined){textNode=document.createTextNode("")}else{textNode=document.createTextNode(text)}while(this.element.firstChild){this.element.removeChild(this.element.firstChild)}this.element.appendChild(textNode)}}]);return AttributeButton}();__webpack_exports__["a"]=AttributeButton},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Common__=__webpack_require__(0);var __WEBPACK_IMPORTED_MODULE_1__AttributesPanel__=__webpack_require__(2);var instance=void 0;var StrategyPanel=function(){function StrategyPanel(element,nodes,edges,attributesPanel){_classCallCheck(this,StrategyPanel);if(!(element instanceof HTMLElement)){throw new Error("@StrategyPanel() -> Erreur : element doit être une instance de HTMLElement")}if(!(attributesPanel instanceof __WEBPACK_IMPORTED_MODULE_1__AttributesPanel__["a"])){throw new Error("@StrategyPanel() -> Erreur : attributsPanel doit être une instance de AttributesPanel")}this.element=element;if(!(nodes instanceof vis.DataSet)){console.log("@StrategyPanel() -> Debug : noeuds par défaut");this.nodes=new vis.DataSet([])}else{this.nodes=nodes}if(!(edges instanceof vis.DataSet)){console.log("@StrategyPanel() -> Debug : liens par défaut");this.edges=new vis.DataSet([])}else{this.edges=edges}this.data={nodes:this.nodes,edges:this.edges};this.network=new vis.Network(element,this.data,__WEBPACK_IMPORTED_MODULE_0__Common__["a"]);this.addNode(6,"Node 6",2);this.setNetworkHandler("click",this.onClick);this.setNetworkHandler("doubleClick",this.onDoubleClick);instance=this}_createClass(StrategyPanel,[{key:"network",value:function network(){return this.network}},{key:"setNetworkHandler",value:function setNetworkHandler(event,handler){if(typeof event==="string"&&typeof handler==="function"){if(__WEBPACK_IMPORTED_MODULE_0__Common__["c"](event)){this.network.on(event,handler)}}}},{key:"deleteNode",value:function deleteNode(node){this.data.nodes.remove(node)}},{key:"updateNode",value:function updateNode(id){var _this5=this;var node=this.data.nodes.get(id);if(node.enabled){this.data.nodes.update([{id:id,enabled:false,color:{background:"#848484",border:"#2E2E2E",highlight:{background:"#A4A4A4",border:"#2E2E2E"},hover:{background:"#A4A4A4",border:"#2E2E2E"}}}]);var allDisabled=true;var sons=[];this.data.edges.forEach(function(edge){if(edge.from==node.id){var son=_this5.data.nodes.get(edge.to);sons.push(son);if(son.enabled){allDisabled=false}}});if(allDisabled&&sons.length!=0){sons.forEach(function(son){_this5.deleteNode(son)})}}else{this.data.nodes.update([{id:id,enabled:true,color:{background:"#D2E5FF",border:"#2B7CE9",highlight:{background:"#D2E5FF",border:"#2B7CE9"},hover:{background:"#D2E5FF",border:"#2B7CE9"}}}])}}},{key:"addNode",value:function addNode(id,label,level){this.data.nodes.add({id:id,label:label,level:level})}},{key:"onClick",value:function onClick(params){params.event="[original event]";document.getElementById("eventSpan").innerHTML="<h2>Click event:</h2>"+JSON.stringify(params,null,4);console.log("click event, getNodeAt returns: "+this.getNodeAt(params.pointer.DOM))}},{key:"onDoubleClick",value:function onDoubleClick(params){var clickedNode=this.getNodeAt(params.pointer.DOM);params.event="[original event]";document.getElementById("eventSpan").innerHTML="<h2>DoubleClick event:</h2>"+JSON.stringify(params,null,4);console.log("click event, getNodeAt returns: "+clickedNode);if(clickedNode!==undefined){instance.updateNode(clickedNode)}}}]);return StrategyPanel}();__webpack_exports__["a"]=StrategyPanel},function(module,__webpack_exports__,__webpack_require__){"use strict";var __WEBPACK_IMPORTED_MODULE_0__Character__=__webpack_require__(3);var popSize=24;var charWidth=150;var charHeight=150;var popJson={characters:[{nom:"Magalie",img:"./assets/charimg/magalie.png",attributs:[{key:"cheveux",value:"rouquine"},{key:"yeux",value:"vert"},{key:"personalité",value:"salope"}]},{nom:"Joseph",img:"./assets/charimg/joseph.png",attributs:[{key:"cheveux",value:"blond"},{key:"yeux",value:"bleu"},{key:"personalité",value:"nazi"}]}]};var PopulationPanel=function(){function PopulationPanel(){_classCallCheck(this,PopulationPanel);this.population=new Array(popSize)}_createClass(PopulationPanel,[{key:"load",value:function load(){var chars=popJson;for(var i=0;i<chars.characters.length;i++){this.population[i]=new __WEBPACK_IMPORTED_MODULE_0__Character__["a"](chars.characters[i],i)}}},{key:"getChar",value:function getChar(i){return this.population[i]}},{key:"refresh",value:function refresh(tabAttribute){for(var i=0;i<this.population.length;i++){var bool=this.population[i].check(tabAttribute)}}},{key:"loadTable",value:function loadTable(population){var table=document.getElementById("tableChar");var nbCol=Math.floor(document.getElementById("population").offsetWidth/charWidth);nbCol=nbCol===0?1:nbCol;var nbRow=Math.ceil(popSize/nbCol);var row=void 0;for(var i=0;i<popSize;i++){if(i%nbCol===0){row=this.addRow(table)}row.appendChild(this.addChar(population.getChar(i%2)))}this.centerCharInfos()}},{key:"addRow",value:function addRow(table){var row=document.createElement("tr");table.appendChild(row);return row}},{key:"addChar",value:function addChar(char){var col=document.createElement("td");col.id="char"+char.id;col.className="charElem";col.innerHTML="\n\t\t\t\t\t\t\t\t<figure>\n\t\t\t\t\t\t\t\t\t<img src ='"+char.img+"' alt='Perso"+char.id+"' id = 'charimg"+char.id+"'/>\n\t\t\t\t\t\t\t\t\t<figcaption>\n\t\t\t\t\t\t\t\t\t\t<div class = 'charInfo'>\n\t\t\t\t\t\t\t\t\t\t\t<h3 id = 'charName'>"+char.nom+"</h3>\n\t\t\t\t\t\t\t\t\t\t\t<p id = 'charstatus"+char.id+'\'>Suspect</p>\n\t\t\t\t\t\t\t\t\t\t\t<div class = "CharTooltip">\n\t\t\t\t\t\t\t\t\t\t\t\t<span class="arrow"></span>\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\'CharTooltip-text\'>'+char.listeAttribute()+"</span>\n\t\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</figcaption>\n\t\t\t\t\t\t\t\t</figure>\n\t\t\t\t\t\t\t";return col}},{key:"centerCharInfos",value:function centerCharInfos(){var charinfo=document.getElementsByClassName("charInfo");for(var i=0;i<charinfo.length;i++){this.centerInParent(charinfo[i])}}},{key:"centerInParent",value:function centerInParent(node){node.style.marginTop="50px"}}]);return PopulationPanel}();__webpack_exports__["a"]=PopulationPanel}]);